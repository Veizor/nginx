language: bash
services: docker
env:
  global:
  - secure: pfl8CxwYFuy6VT20IvfZ/CD1B1unXN6VqyyZ+oKNnERPjkZ8MW9Dcb2n83Sr5dFlfMd4RraOg4H5vL3WWYCVHBMfBcwI0Vh3n+fbEDYkvHOJm30/b7SBjljFjtrRK9Y/MFbiWKWojxi7ciAhbSMWQ/jtfsr0M2S8hn0Sot+1iMHQ7nis6K5boQvSFtuAsqKP8f6BnQCFDD2xGsX/G1hRib0ICw20gWqWyZkouEMvM3+jnqC4PRCEW9rbYH8l9uLMV9gtyYCa7w2xAUIOfNMYXqjuo236q9eO5qV8Mpz/yhdfF8nFRsabvyiP3KKr1qh8B/PQscRyjweyhkBFUO/wwgyvw1ar+7vk11zZgD6FzhapEKNOS/h8Dj7w8/P30uwdwvyXPFFAZzCW6zPz8dkFKUCqfBwMqxA76b9SoRNux3vVUKYr85ZF2jJcQKbAWf02H74li2Sms7RtAm1quEIfCQhu1JwHEGyWP4UKNQp3b0X1iCe54FzowljQDSVIQ6l6n1+LC4A0un9pr2DtVHwBX8B5DzvGheRX3YXViZ5BC+0AzSEN0sFkkPYaOwS3ZUy7jii5wLQCg2z1Ud6pwflIfdZjrTyFwZ3dV83ugxw3MRFC4XXAECHWt1QnXL0CTm4TbsRzcEJBKKe9R9YPr3zaAFpV1EsFh8KpjUy1WqeDzYs=
  - secure: tQdsIa6WdKMZHaSh7Z69xRSZSKmZrUwMoi7rzglcMrL2lJJD725vS4sAo3TFye0NHo4Ymq9xSGlVWEikNo4RF3FjzIAhrVAlH6ARGI4uhdeHjP8ABR++Q+ujDK9KRD0WvfWAvLlYnf+6PZ9h6UUFuJxpK5g+op2iw+NrJZys4YjxTW57sCksAW7jI6mf119LOX0jfyznDEkNnEXEhD90qSIOYvCoE9NKhk+ZgcQ/2gpWoRHlcw4b9Mf1cT0jI6VcYEAlGbaHGgjY9s0P0ciX4pzJnJmdbdHgO8MTIsmm1es0cq9itJfEvhJA+dnQQwljUh7x+CX5E3UXUW32VRCkRd3WAbWyGW4GaOq5XQm6rqPd6V4sV+0A19zOOW7CyAqBx+jGOdaXgv1lEJrUhkRuxdyZzjnD4qTOXUU0vIcBsuc9ahGe4YuobW8S3mpCwXdTjUAn+fYk7caI70l1PT/U8VJPrYzpF5OvCLOjzo4js8FyVjk0loSNBz6KDcqzxIP02ATE+8j7JcgRq465IxYK816Psnbz/CZjjF+w90wfS6ZGY8DAgQxSJ0ZpecdmcgmjGn37tSgC5gvaRAVcsQQJuNrfmKkYAWvdUKk8KLnyiT7xr5bJ5bX7bTTMPQ3zXqAyBjlBI6V57eow7splzeyOC/hpvuJJfdrxqrhM27BDx44=
  - secure: F2ohbah/nn6jmhb4U1BshDastgTP1d7DVCpLJkoYkbBrFwuSLlb9F7g+ZrywoLE4YPqfl/Nia4rIfUxKnIz9Fpvfr9HtQi+ZEI6cFUraVWBizD6NtvM9puibxZYD/nJkFLR/gcH+U2FMR2ZB9LLeBrU599tGqCNnLS1q9B8jfWNTVzR1FzV0oobMJC0UL2vroNgjFbTqXHP4QOiIVIO/myNZIN/EryQCSiSifu7KvE4eur4QQW7mi55qQIe7Ef0qF2qfSQykZK2YDOSHyjuBpIliR0BZ6qP08PBGE7Y1BFtePQaOlLAlMbs0wHDXJgDFgF6wT2gV2sR5Sceb/ExLpncY3NLk3NMhCg9WzToVdjdRdHlZueRcvRbJUYZD0kbGkfAsrr+LL40x+Dmwg3rw2iAGr2vA57LenALDpHI7quleHstkRwoG8gnrwcOYAvLZbNAxJnaKRUrlW8+qKR1PRaD2tIeLWnOylHb6/NCw/SRzHWB/HzLN9EO9DzSzfjW1uj3L+NfOP05fbgu9Ap7DquspDLigNXKu7XqM++TDimuEifph0NmCbkTGoCbjl8r+B6nytA/VKuqjIWL6pb6/W5v2Nct0itDxdoFOYE/wNdhJSE+b+tQijO10ZTBtZ8IqSLxn49KYpFLCGzhfpE/Y6mZBWULAIQw8UomIkSm3yHU=
script:
- export TAG=`if [ "$TRAVIS_BRANCH" == "master" ]; then echo "latest"; else echo $TRAVIS_BRANCH;
  fi`
- docker build -f Dockerfile -t ${TRAVIS_REPO_SLUG,,}:$TAG .
after_success:
- docker login -e $DOCKER_EMAIL -u $DOCKER_USER -p $DOCKER_PASS
- docker tag ${TRAVIS_REPO_SLUG,,}:$TAG ${TRAVIS_REPO_SLUG,,}:travis-$TRAVIS_BUILD_NUMBER
- docker push ${TRAVIS_REPO_SLUG,,}
